<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ ‚Äî –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–∞–Ω–∫ –†–£–∑</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    html, body {
      font-family: "Segoe UI", sans-serif;
      background: url("—Ñ–æ–Ω.jpg") no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 0;
      color: #003366;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      overscroll-behavior: none;
      touch-action: manipulation;
    }

    body * {
      box-sizing: border-box;
    }

    img.logo {
      width: 100%;
      height: auto;
      display: block;
      cursor: pointer;
      margin: 0;
      padding: 0;
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 25px;
      margin-top: 10px;
      width: 92%;
      max-width: 420px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }

    h2 {
      color: #003366;
      font-size: 22px;
      margin-bottom: 20px;
      border-bottom: 2px solid #003366;
      padding-bottom: 8px;
    }

    label {
      display: block;
      font-weight: bold;
      margin-top: 15px;
      font-size: 15px;
      text-align: left;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      text-align: center;
      background-color: #f8f9fa;
    }

    select:disabled {
      color: #555;
      background-color: #e9ecef;
      appearance: none;
    }

    button {
      margin-top: 25px;
      width: 100%;
      background-color: #003366;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #004a99;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      visibility: hidden;
      z-index: 100;
    }

    .modal.active {
      visibility: visible;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 25px;
      text-align: center;
      width: 90%;
      max-width: 320px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .modal-content p {
      font-size: 16px;
      margin-bottom: 20px;
    }

    .modal-content button {
      width: auto;
      padding: 8px 18px;
      font-size: 15px;
    }

    footer {
      text-align: center;
      color: #003366;
      font-size: 13px;
      margin: 25px 10px 15px;
      line-height: 1.5;
    }

    footer a {
      color: #003366;
      text-decoration: none;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body oncontextmenu="return false;">
  <!-- –ª–æ–≥–æ—Ç–∏–ø -->
  <img src="–ª–æ–≥–æ.jpg" class="logo" alt="–¶–ë –†–£–ó" onclick="window.location.href='https://cbu.uz/ru/'">

  <!-- —Ñ–æ—Ä–º–∞ -->
  <div class="container">
    <h2>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ</h2>

    <label>–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ</label>
    <select disabled>
      <option>–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∞–ø–ø–∞—Ä–∞—Ç –¶–ë</option>
      <option>–¢–∞—à–∫–µ–Ω—Ç—Å–∫–æ–µ –æ–±–ª–∞—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</option>
      <option>–°–∞–º–∞—Ä–∫–∞–Ω–¥—Å–∫–æ–µ –æ–±–ª–∞—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</option>
    </select>

    <label>–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç</label>
    <select disabled>
      <option>–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</option>
      <option>–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ò–¢</option>
      <option>–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è</option>
    </select>

    <label>–§–ò–û –∑–∞—è–≤–∏—Ç–µ–ª—è</label>
    <input type="text" id="fio" placeholder="–í–≤–µ–¥–∏—Ç–µ –§–ò–û">

    <label>–¶–µ–ª—å –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
    <select id="purpose">
      <option value="specialist">–°–≤—è–∑—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º</option>
      <option value="question">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</option>
      <option value="support">–û–±—Ä–∞—â–µ–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</option>
      <option value="proposal">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</option>
    </select>

    <div id="specialist-section" style="display:block;">
      <label>–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</label>
      <input type="text" id="tabnum" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 041483">
    </div>

    <div id="question-section" style="display:none;">
      <label>–£–∫–∞–∂–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å</label>
      <input type="text" id="question" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å">
    </div>

    <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
  </div>

  <!-- –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div class="modal" id="modal">
    <div class="modal-content" id="modal-content">
      <p id="modal-text">–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –æ–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞</p>
      <button id="closeModal">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>

  <!-- —Ñ—É—Ç–µ—Ä -->
  <footer>
    ¬© 2005‚Äì2025<br>
    –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–∞–Ω–∫ –†–µ—Å–ø—É–±–ª–∏–∫–∏ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç.<br>
    –î–∏–∑–∞–π–Ω –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–π—Ç–∞ <a href="https://pixelcraft.uz/">Pixelcraft</a>
  </footer>

  <script>
    const tg = window.Telegram.WebApp;
    const fioInput = document.getElementById('fio');
    const tabnumInput = document.getElementById('tabnum');
    const purposeSelect = document.getElementById('purpose');
    const sendBtn = document.getElementById('sendBtn');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modal-text');
    const closeModal = document.getElementById('closeModal');

    // –∑–∞–ø—Ä–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
    document.addEventListener('wheel', e => { if (e.ctrlKey) e.preventDefault(); }, { passive: false });
    document.addEventListener('gesturestart', e => e.preventDefault());
    document.addEventListener('gesturechange', e => e.preventDefault());
    document.addEventListener('gestureend', e => e.preventDefault());

    // —Å–ø–∏—Å–æ–∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
    const managers = {
      "041483": {
        fio: "–•–∞–π—Ä—É–ª–ª–∏–Ω –î–º–∏—Ç—Ä–∏–π –®–∞–º–∏–ª–µ–≤–∏—á",
        title: "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ **–•–∞–π—Ä—É–ª–ª–∏–Ω –î–º–∏—Ç—Ä–∏–π –®–∞–º–∏–ª–µ–≤–∏—á**",
        link: "https://t.me/m/9CzX_flWZDhi",
        chat_id: 7698094195
      },
      "112437": {
        fio: "–†—ã–º–∫—É–ª–æ–≤ –ë–∞—Ö—ã—Ç –ê–ª–∏–º–∂–æ–Ω–æ–≤–∏—á",
        title: "–°—Ç–∞—Ä—à–∏–π –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ **–†—ã–º–∫—É–ª–æ–≤ –ë–∞—Ö—ã—Ç –ê–ª–∏–º–∂–æ–Ω–æ–≤–∏—á**",
        link: "https://t.me/Uz_MB1",
        chat_id: 7814377002
      },
    };

    const token = "7571144445:AAHZD5LCp81Taf-dgPo2Jw894rz1JqbdgI4";

    purposeSelect.addEventListener("change", () => {
      const purpose = purposeSelect.value;
      document.getElementById("specialist-section").style.display = purpose === "specialist" ? "block" : "none";
      document.getElementById("question-section").style.display = purpose === "specialist" ? "none" : "block";
    });

    sendBtn.addEventListener("click", async () => {
      const fio = fioInput.value.trim();
      const tab = tabnumInput.value.trim();
      const purpose = purposeSelect.value;
      const client = tg.initDataUnsafe?.user;

      if (!fio) return showModal("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –§–ò–û –∑–∞—è–≤–∏—Ç–µ–ª—è.");

      if (purpose !== "specialist") {
        showModal("–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –æ–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞.", () => {
          window.location.href = "https://cbu.uz/ru/";
        });
        return;
      }

      if (!managers[tab]) {
        showModal("‚ùå –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ —Å —ç—Ç–∏–º –Ω–æ–º–µ—Ä–æ–º –Ω–µ—Ç.", () => tabnumInput.focus());
        return;
      }

      const manager = managers[tab];
      const clientName = `${client?.first_name || ""} ${client?.last_name || ""}`.trim();
      const username = client?.username ? `@${client.username}` : "‚Äî";

      const textForManager =
        `üì® –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞!\n` +
        `üë§ –§–ò–û (–∏–∑ —Ñ–æ—Ä–º—ã): ${fio}\n` +
        `üë§ –§–ò–û (–≤ Telegram): ${clientName}\n` +
        `üåê Username: ${username}\n` +
        `üÜî Chat ID: <code>${client?.id}</code>`;

      await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: manager.chat_id,
          text: textForManager,
          parse_mode: "HTML"
        })
      });

      await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: client.id,
          text: manager.title,
          parse_mode: "Markdown",
          reply_markup: {
            inline_keyboard: [[{ text: "–ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç", url: manager.link }]]
          }
        })
      });

      showModal("–ó–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç ‚úî", () => tg.close());
    });

    function showModal(text, onClose) {
      modalText.textContent = text;
      modal.classList.add("active");
      closeModal.onclick = () => {
        modal.classList.remove("active");
        if (onClose) onClose();
      };
    }
  </script>
</body>
</html>
