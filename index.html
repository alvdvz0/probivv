<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Отправить обращение — Центральный банк РУз</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    html, body {
      font-family: "Segoe UI", sans-serif;
      background: url("фон.jpg") no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 0;
      color: #003366;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      -webkit-user-select: none;
      user-select: none;
      overscroll-behavior: none;
      touch-action: manipulation;
    }

    body * { box-sizing: border-box; }

    .logo-container {
      position: relative;
      width: 100%;
    }

    .lang-toggle {
      position: absolute;
      top: 10px;
      left: 14px;
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      color: #003366;
      padding: 6px 12px;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      transition: all 0.2s ease-in-out;
    }

    .lang-toggle:hover {
      background: rgba(255,255,255,1);
      transform: scale(1.05);
    }

    img.logo {
      width: 100%;
      height: auto;
      display: block;
      cursor: pointer;
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 25px;
      margin-top: 10px;
      width: 92%;
      max-width: 420px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }

    h2 {
      color: #003366;
      font-size: 22px;
      margin-bottom: 20px;
      border-bottom: 2px solid #003366;
      padding-bottom: 8px;
    }

    label {
      display: block;
      font-weight: bold;
      margin-top: 15px;
      font-size: 15px;
      text-align: left;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      text-align: center;
      background-color: #f8f9fa;
    }

    textarea {
      resize: none;
      height: 90px;
    }

    select:disabled {
      color: #555;
      background-color: #e9ecef;
      appearance: none;
    }

    button {
      margin-top: 25px;
      width: 100%;
      background-color: #003366;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover { background-color: #004a99; }

    /* Модальное окно */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      visibility: hidden;
      z-index: 100;
    }

    .modal.active { visibility: visible; }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 25px;
      text-align: center;
      width: 90%;
      max-width: 320px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .modal-content p {
      font-size: 16px;
      margin-bottom: 20px;
    }

    footer {
      text-align: center;
      color: #003366;
      font-size: 13px;
      margin: 25px 10px 15px;
      line-height: 1.5;
    }

    footer a {
      color: #003366;
      text-decoration: none;
      font-weight: 600;
    }
    footer a:hover { text-decoration: underline; }
  </style>
</head>
<body oncontextmenu="return false;">
  <div class="logo-container">
    <div class="lang-toggle" id="langToggle">Узб</div>
    <img src="лого.jpg" class="logo" id="logo" alt="ЦБ РУЗ" onclick="window.location.href='https://cbu.uz/ru/'">
  </div>

  <div class="container">
    <h2 id="title">Отправить обращение</h2>

    <label id="territorial-label">Территориальное подразделение</label>
    <select disabled>
      <option id="territorial-option">Центральный аппарат ЦБ</option>
    </select>

    <label id="department-label">Департамент</label>
    <select disabled>
      <option id="department-option">Департамент Безопасности</option>
    </select>

    <label id="fio-label">ФИО заявителя</label>
    <input type="text" id="fio" placeholder="Введите ФИО">

    <label id="purpose-label">Цель обращения</label>
    <select id="purpose">
      <option value="specialist" id="opt-specialist">Связь со специалистом</option>
      <option value="question" id="opt-question">Задать вопрос</option>
      <option value="support" id="opt-support">Обращение в поддержку</option>
      <option value="proposal" id="opt-proposal">Предложения</option>
    </select>

    <div id="specialist-section" style="display:block;">
      <label id="tabnum-label">Табельный номер специалиста</label>
      <input type="text" id="tabnum" placeholder="Например: 041483">
    </div>

    <div id="question-section" style="display:none;">
      <label id="question-label">Укажите ваш вопрос</label>
      <textarea id="question" placeholder="Введите ваш вопрос"></textarea>
    </div>

    <button id="sendBtn">Отправить запрос</button>
  </div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <p id="modal-text">Запрос отправлен, ожидайте ответа.</p>
      <button id="closeModal">Закрыть</button>
    </div>
  </div>

  <footer id="footer">
    © 2005–2025<br>
    Центральный банк Республики Узбекистан, официальный сайт.<br>
    Дизайн и разработка сайта <a href="https://pixelcraft.uz/">Pixelcraft</a>
  </footer>

  <script>
    const tg = window.Telegram.WebApp;
    const langToggle = document.getElementById("langToggle");
    const logo = document.getElementById("logo");
    const purposeSelect = document.getElementById("purpose");
    const specialistSection = document.getElementById("specialist-section");
    const questionSection = document.getElementById("question-section");
    const modal = document.getElementById("modal");
    const modalText = document.getElementById("modal-text");
    const closeModal = document.getElementById("closeModal");
    let currentLang = "ru";

    const i18n = {
      ru: {
        title: "Отправить обращение",
        territorialLabel: "Территориальное подразделение",
        territorialOption: "Центральный аппарат ЦБ",
        departmentLabel: "Департамент",
        departmentOption: "Департамент Безопасности",
        fioLabel: "ФИО заявителя",
        fioPlaceholder: "Введите ФИО",
        purposeLabel: "Цель обращения",
        optSpecialist: "Связь со специалистом",
        optQuestion: "Задать вопрос",
        optSupport: "Обращение в поддержку",
        optProposal: "Предложения",
        tabnumLabel: "Табельный номер специалиста",
        tabPlaceholder: "Например: 041483",
        questionLabel: "Опишите ваш вопрос",
        questionPlaceholder: "Введите вопрос или предложение",
        sendBtn: "Отправить запрос",
        modalSent: "Запрос отправлен, ожидайте ответа.",
        close: "Закрыть",
        footer: `© 2005–2025<br>Центральный банк Республики Узбекистан, официальный сайт.<br>Дизайн и разработка сайта <a href="https://pixelcraft.uz/">Pixelcraft</a>`,
        langBtn: "Узб",
        logo: "лого.jpg"
      },
      uz: {
        title: "Murojaat yuborish",
        territorialLabel: "Hududiy boshqarma",
        territorialOption: "MBning Markaziy apparati",
        departmentLabel: "Departament",
        departmentOption: "Xavfsizlik departamenti",
        fioLabel: "Ariza beruvchining F.I.Sh.",
        fioPlaceholder: "F.I.Sh.ni kiriting",
        purposeLabel: "Murojaat maqsadi",
        optSpecialist: "Mutaxassis bilan bogʻlanish",
        optQuestion: "Savol berish",
        optSupport: "Qoʻllab-quvvatlash xizmatiga murojaat",
        optProposal: "Takliflar",
        tabnumLabel: "Mutaxassisning tabel raqami",
        tabPlaceholder: "Tabel raqami",
        questionLabel: "Savolingizni kiriting",
        questionPlaceholder: "Savol yoki taklifni yozing",
        sendBtn: "Soʻrov yuborish",
        modalSent: "Soʻrov yuborildi, javobni kuting.",
        close: "Yopish",
        footer: `© 2005–2025 O‘zbekiston Respublikasi Markaziy banki<br>Sayt yaratuvchisi <a href="https://pixelcraft.uz/">Pixelcraft®</a>`,
        langBtn: "Rus",
        logo: "лого1.jpg"
      }
    };

    function applyLang(lang) {
      const t = i18n[lang];
      document.getElementById("title").innerHTML = t.title;
      document.getElementById("territorial-label").innerHTML = t.territorialLabel;
      document.getElementById("territorial-option").innerHTML = t.territorialOption;
      document.getElementById("department-label").innerHTML = t.departmentLabel;
      document.getElementById("department-option").innerHTML = t.departmentOption;
      document.getElementById("fio-label").innerHTML = t.fioLabel;
      document.getElementById("fio").placeholder = t.fioPlaceholder;
      document.getElementById("purpose-label").innerHTML = t.purposeLabel;
      document.getElementById("opt-specialist").innerHTML = t.optSpecialist;
      document.getElementById("opt-question").innerHTML = t.optQuestion;
      document.getElementById("opt-support").innerHTML = t.optSupport;
      document.getElementById("opt-proposal").innerHTML = t.optProposal;
      document.getElementById("tabnum-label").innerHTML = t.tabnumLabel;
      document.getElementById("tabnum").placeholder = t.tabPlaceholder;
      document.getElementById("question-label").innerHTML = t.questionLabel;
      document.getElementById("question").placeholder = t.questionPlaceholder;
      document.getElementById("sendBtn").innerHTML = t.sendBtn;
      document.getElementById("footer").innerHTML = t.footer;
      langToggle.textContent = t.langBtn;
      logo.src = t.logo;
      currentLang = lang;
    }

    langToggle.addEventListener("click", () => {
      const next = currentLang === "ru" ? "uz" : "ru";
      applyLang(next);
    });

    purposeSelect.addEventListener("change", () => {
      const val = purposeSelect.value;
      if (val === "specialist") {
        specialistSection.style.display = "block";
        questionSection.style.display = "none";
      } else {
        specialistSection.style.display = "none";
        questionSection.style.display = "block";
      }
    });

    function showModal(text) {
      modalText.innerHTML = text;
      modal.classList.add("active");
      closeModal.textContent = i18n[currentLang].close;
      closeModal.onclick = () => modal.classList.remove("active");
    }

    document.getElementById("sendBtn").onclick = () => {
      const purpose = purposeSelect.value;
      const fio = document.getElementById("fio").value;
      const question = document.getElementById("question").value;
      const chatId = "7048297998";

      if (purpose !== "specialist" && fio && question) {
        const message = `Новое обращение:\nФИО: ${fio}\nЦель: ${i18n[currentLang][`opt-${purpose}`]}\nСообщение: ${question}`;
        tg.sendData(JSON.stringify({ chat_id: chatId, text: message }));
      }
      showModal(i18n[currentLang].modalSent);
    };

    // защита от масштабирования
    document.addEventListener('wheel', e => { if (e.ctrlKey) e.preventDefault(); }, { passive: false });
    document.addEventListener('gesturestart', e => e.preventDefault());
    document.addEventListener('gesturechange', e => e.preventDefault());
    document.addEventListener('gestureend', e => e.preventDefault());
  </script>
</body>
</html>
